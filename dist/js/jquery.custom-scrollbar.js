!function(e){e.fn.customScrollbar=function(i,t){var o={skin:void 0,hScroll:!0,vScroll:!0,updateOnWindowResize:!1,animationSpeed:300,onCustomScroll:void 0,swipeSpeed:1,wheelSpeed:40,fixedThumbWidth:void 0,fixedThumbHeight:void 0,preventDefaultScroll:!1},s=function(i,t){this.$element=e(i),this.options=t,this.addScrollableClass(),this.addSkinClass(),this.addScrollBarComponents(),this.options.vScroll&&(this.vScrollbar=new n(this,new r)),this.options.hScroll&&(this.hScrollbar=new n(this,new l)),this.$element.data("scrollable",this),this.initKeyboardScrolling(),this.bindEvents()};s.prototype={addScrollableClass:function(){this.$element.hasClass("scrollable")||(this.scrollableAdded=!0,this.$element.addClass("scrollable"))},removeScrollableClass:function(){this.scrollableAdded&&this.$element.removeClass("scrollable")},addSkinClass:function(){"string"!=typeof this.options.skin||this.$element.hasClass(this.options.skin)||(this.skinClassAdded=!0,this.$element.addClass(this.options.skin))},removeSkinClass:function(){this.skinClassAdded&&this.$element.removeClass(this.options.skin)},addScrollBarComponents:function(){this.assignViewPort(),0==this.$viewPort.length&&(this.$element.wrapInner('<div class="viewport" />'),this.assignViewPort(),this.viewPortAdded=!0),this.assignOverview(),0==this.$overview.length&&(this.$viewPort.wrapInner('<div class="overview" />'),this.assignOverview(),this.overviewAdded=!0),this.addScrollBar("vertical","prepend"),this.addScrollBar("horizontal","append")},removeScrollbarComponents:function(){this.removeScrollbar("vertical"),this.removeScrollbar("horizontal"),this.overviewAdded&&this.$element.unwrap(),this.viewPortAdded&&this.$element.unwrap()},removeScrollbar:function(e){this[e+"ScrollbarAdded"]&&this.$element.find(".scroll-bar."+e).remove()},assignViewPort:function(){this.$viewPort=this.$element.find(".viewport")},assignOverview:function(){this.$overview=this.$viewPort.find(".overview")},addScrollBar:function(e,i){0==this.$element.find(".scroll-bar."+e).length&&(this.$element[i]("<div class='scroll-bar "+e+"'><div class='thumb'></div></div>"),this[e+"ScrollbarAdded"]=!0)},resize:function(e){this.vScrollbar&&this.vScrollbar.resize(e),this.hScrollbar&&this.hScrollbar.resize(e)},scrollTo:function(e){this.vScrollbar&&this.vScrollbar.scrollToElement(e),this.hScrollbar&&this.hScrollbar.scrollToElement(e)},scrollToXY:function(e,i){this.scrollToX(e),this.scrollToY(i)},scrollToX:function(e){this.hScrollbar&&this.hScrollbar.scrollOverviewTo(e,!0)},scrollToY:function(e){this.vScrollbar&&this.vScrollbar.scrollOverviewTo(e,!0)},scrollByX:function(e){this.hScrollbar&&this.scrollToX(this.hScrollbar.overviewPosition()+e)},scrollByY:function(e){this.vScrollbar&&this.scrollToY(this.vScrollbar.overviewPosition()+e)},remove:function(){this.removeScrollableClass(),this.removeSkinClass(),this.removeScrollbarComponents(),this.$element.data("scrollable",null),this.removeKeyboardScrolling(),this.vScrollbar&&this.vScrollbar.remove(),this.hScrollbar&&this.hScrollbar.remove()},setAnimationSpeed:function(e){this.options.animationSpeed=e},isInside:function(i,t){var o=e(i),s=e(t),n=o.offset(),l=s.offset();return n.top>=l.top&&n.left>=l.left&&n.top+o.height()<=l.top+s.height()&&n.left+o.width()<=l.left+s.width()},initKeyboardScrolling:function(){var e=this;this.elementKeydown=function(i){document.activeElement===e.$element[0]&&(e.vScrollbar&&e.vScrollbar.keyScroll(i),e.hScrollbar&&e.hScrollbar.keyScroll(i))},this.$element.attr("tabindex","-1").keydown(this.elementKeydown)},removeKeyboardScrolling:function(){this.$element.removeAttr("tabindex").unbind("keydown",this.elementKeydown)},bindEvents:function(){this.options.onCustomScroll&&this.$element.on("customScroll",this.options.onCustomScroll)}};var n=function(e,i){this.scrollable=e,this.sizing=i,this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element),this.$thumb=this.$scrollBar.find(".thumb"),this.setScrollPosition(0,0),this.resize(),this.initMouseMoveScrolling(),this.initMouseWheelScrolling(),this.initTouchScrolling(),this.initMouseClickScrolling(),this.initWindowResize()};n.prototype={resize:function(e){this.overviewSize=this.sizing.size(this.scrollable.$overview),this.calculateViewPortSize(),this.sizing.size(this.scrollable.$viewPort,this.viewPortSize),this.ratio=this.viewPortSize/this.overviewSize,this.sizing.size(this.$scrollBar,this.viewPortSize),this.thumbSize=this.calculateThumbSize(),this.sizing.size(this.$thumb,this.thumbSize),this.maxThumbPosition=this.calculateMaxThumbPosition(),this.maxOverviewPosition=this.calculateMaxOverviewPosition(),this.enabled=this.overviewSize>this.viewPortSize,void 0===this.scrollPercent&&(this.scrollPercent=0),this.enabled?this.rescroll(e):this.setScrollPosition(0,0),this.$scrollBar.toggle(this.enabled)},calculateViewPortSize:function(){var e=this.sizing.size(this.scrollable.$element);if(e>0&&!this.maxSizeUsed)this.viewPortSize=e,this.maxSizeUsed=!1;else{var i=this.sizing.maxSize(this.scrollable.$element);this.viewPortSize=Math.min(i,this.overviewSize),this.maxSizeUsed=!0}},calculateThumbSize:function(){var e,i=this.sizing.fixedThumbSize(this.scrollable.options);return e=i?i:this.ratio*this.viewPortSize,Math.max(e,this.sizing.minSize(this.$thumb))},initMouseMoveScrolling:function(){var i=this;this.$thumb.mousedown(function(e){i.enabled&&i.startMouseMoveScrolling(e)}),this.documentMouseup=function(e){i.stopMouseMoveScrolling(e)},e(document).mouseup(this.documentMouseup),this.documentMousemove=function(e){i.mouseMoveScroll(e)},e(document).mousemove(this.documentMousemove),this.$thumb.click(function(e){e.stopPropagation()})},removeMouseMoveScrolling:function(){this.$thumb.unbind(),e(document).unbind("mouseup",this.documentMouseup),e(document).unbind("mousemove",this.documentMousemove)},initMouseWheelScrolling:function(){var e=this;this.scrollable.$element.mousewheel(function(i,t,o,s){if(e.enabled){var n=e.mouseWheelScroll(o,s);e.stopEventConditionally(i,n)}})},removeMouseWheelScrolling:function(){this.scrollable.$element.unbind("mousewheel")},initTouchScrolling:function(){if(document.addEventListener){var e=this;this.elementTouchstart=function(i){e.enabled&&e.startTouchScrolling(i)},this.scrollable.$element[0].addEventListener("touchstart",this.elementTouchstart),this.documentTouchmove=function(i){e.touchScroll(i)},this.scrollable.$element[0].addEventListener("touchmove",this.documentTouchmove),this.elementTouchend=function(i){e.stopTouchScrolling(i)},this.scrollable.$element[0].addEventListener("touchend",this.elementTouchend)}},removeTouchScrolling:function(){document.addEventListener&&(this.scrollable.$element[0].removeEventListener("touchstart",this.elementTouchstart),document.removeEventListener("touchmove",this.documentTouchmove),this.scrollable.$element[0].removeEventListener("touchend",this.elementTouchend))},initMouseClickScrolling:function(){var e=this;this.scrollBarClick=function(i){e.mouseClickScroll(i)},this.$scrollBar.click(this.scrollBarClick)},removeMouseClickScrolling:function(){this.$scrollBar.unbind("click",this.scrollBarClick)},initWindowResize:function(){if(this.scrollable.options.updateOnWindowResize){var i=this;this.windowResize=function(){i.resize()},e(window).resize(this.windowResize)}},removeWindowResize:function(){e(window).unbind("resize",this.windowResize)},isKeyScrolling:function(e){return null!=this.keyScrollDelta(e)},keyScrollDelta:function(e){for(var i in this.sizing.scrollingKeys)if(i==e)return this.sizing.scrollingKeys[e](this.viewPortSize);return null},startMouseMoveScrolling:function(i){this.mouseMoveScrolling=!0,e("body").addClass("not-selectable"),this.setUnselectable(e("body"),"on"),this.setScrollEvent(i),i.preventDefault()},stopMouseMoveScrolling:function(i){this.mouseMoveScrolling=!1,e("body").removeClass("not-selectable"),this.setUnselectable(e("body"),null)},setUnselectable:function(e,i){e.attr("unselectable")!=i&&(e.attr("unselectable",i),e.find(":not(input)").attr("unselectable",i))},mouseMoveScroll:function(e){if(this.mouseMoveScrolling){var i=this.sizing.mouseDelta(this.scrollEvent,e);this.scrollThumbBy(i),this.setScrollEvent(e)}},startTouchScrolling:function(e){e.touches&&1==e.touches.length&&(this.setScrollEvent(e.touches[0]),this.touchScrolling=!0,e.stopPropagation())},touchScroll:function(e){if(this.touchScrolling&&e.touches&&1==e.touches.length){var i=-this.sizing.mouseDelta(this.scrollEvent,e.touches[0])*this.scrollable.options.swipeSpeed,t=this.scrollOverviewBy(i);t&&this.setScrollEvent(e.touches[0]),this.stopEventConditionally(e,t)}},stopTouchScrolling:function(e){this.touchScrolling=!1,e.stopPropagation()},mouseWheelScroll:function(e,i){var t=-this.sizing.wheelDelta(e,i)*this.scrollable.options.wheelSpeed;if(0!=t)return this.scrollOverviewBy(t)},mouseClickScroll:function(e){var i=this.viewPortSize-20;e["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()]&&(i=-i),this.scrollOverviewBy(i)},keyScroll:function(e){var i=e.which;if(this.enabled&&this.isKeyScrolling(i)){var t=this.scrollOverviewBy(this.keyScrollDelta(i));this.stopEventConditionally(e,t)}},scrollThumbBy:function(e){var i=this.thumbPosition();i+=e,i=this.positionOrMax(i,this.maxThumbPosition);var t=this.scrollPercent;if(this.scrollPercent=i/this.maxThumbPosition,t!=this.scrollPercent){var o=i*this.maxOverviewPosition/this.maxThumbPosition;return this.setScrollPosition(o,i),this.triggerCustomScroll(t),!0}return!1},thumbPosition:function(){return this.$thumb.position()[this.sizing.offsetComponent()]},scrollOverviewBy:function(e){var i=this.overviewPosition()+e;return this.scrollOverviewTo(i,!1)},overviewPosition:function(){return-this.scrollable.$overview.position()[this.sizing.offsetComponent()]},scrollOverviewTo:function(e,i){e=this.positionOrMax(e,this.maxOverviewPosition);var t=this.scrollPercent;if(this.scrollPercent=e/this.maxOverviewPosition,t!=this.scrollPercent){var o=this.scrollPercent*this.maxThumbPosition;return i?this.setScrollPositionWithAnimation(e,o):this.setScrollPosition(e,o),this.triggerCustomScroll(t),!0}return!1},positionOrMax:function(e,i){return e<0?0:e>i?i:e},triggerCustomScroll:function(e){this.scrollable.$element.trigger("customScroll",{scrollAxis:this.sizing.scrollAxis(),direction:this.sizing.scrollDirection(e,this.scrollPercent),scrollPercent:100*this.scrollPercent})},rescroll:function(e){if(e){var i=this.positionOrMax(this.overviewPosition(),this.maxOverviewPosition);this.scrollPercent=i/this.maxOverviewPosition;var t=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(i,t)}else{var t=this.scrollPercent*this.maxThumbPosition,i=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(i,t)}},setScrollPosition:function(e,i){this.$thumb.css(this.sizing.offsetComponent(),i+"px"),this.scrollable.$overview.css(this.sizing.offsetComponent(),-e+"px")},setScrollPositionWithAnimation:function(e,i){var t={},o={};t[this.sizing.offsetComponent()]=i+"px",this.$thumb.animate(t,this.scrollable.options.animationSpeed),o[this.sizing.offsetComponent()]=-e+"px",this.scrollable.$overview.animate(o,this.scrollable.options.animationSpeed)},calculateMaxThumbPosition:function(){return Math.max(0,this.sizing.size(this.$scrollBar)-this.thumbSize)},calculateMaxOverviewPosition:function(){return Math.max(0,this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort))},setScrollEvent:function(e){var i="page"+this.sizing.scrollAxis();this.scrollEvent&&this.scrollEvent[i]==e[i]||(this.scrollEvent={pageX:e.pageX,pageY:e.pageY})},scrollToElement:function(i){var t=e(i);if(this.sizing.isInside(t,this.scrollable.$overview)&&!this.sizing.isInside(t,this.scrollable.$viewPort)){var o=t.offset(),s=this.scrollable.$overview.offset();this.scrollable.$viewPort.offset();this.scrollOverviewTo(o[this.sizing.offsetComponent()]-s[this.sizing.offsetComponent()],!0)}},remove:function(){this.removeMouseMoveScrolling(),this.removeMouseWheelScrolling(),this.removeTouchScrolling(),this.removeMouseClickScrolling(),this.removeWindowResize()},stopEventConditionally:function(e,i){(i||this.scrollable.options.preventDefaultScroll)&&(e.preventDefault(),e.stopPropagation())}};var l=function(){};l.prototype={size:function(e,i){return i?e.width(i):e.width()},minSize:function(e){return parseInt(e.css("min-width"))||0},maxSize:function(e){return parseInt(e.css("max-width"))||0},fixedThumbSize:function(e){return e.fixedThumbWidth},scrollBar:function(e){return e.find(".scroll-bar.horizontal")},mouseDelta:function(e,i){return i.pageX-e.pageX},offsetComponent:function(){return"left"},wheelDelta:function(e,i){return e},scrollAxis:function(){return"X"},scrollDirection:function(e,i){return e<i?"right":"left"},scrollingKeys:{37:function(e){return-10},39:function(e){return 10}},isInside:function(i,t){var o=e(i),s=e(t),n=o.offset(),l=s.offset();return n.left>=l.left&&n.left+o.width()<=l.left+s.width()}};var r=function(){};return r.prototype={size:function(e,i){return i?e.height(i):e.height()},minSize:function(e){return parseInt(e.css("min-height"))||0},maxSize:function(e){return parseInt(e.css("max-height"))||0},fixedThumbSize:function(e){return e.fixedThumbHeight},scrollBar:function(e){return e.find(".scroll-bar.vertical")},mouseDelta:function(e,i){return i.pageY-e.pageY},offsetComponent:function(){return"top"},wheelDelta:function(e,i){return i},scrollAxis:function(){return"Y"},scrollDirection:function(e,i){return e<i?"down":"up"},scrollingKeys:{38:function(e){return-10},40:function(e){return 10},33:function(e){return-(e-20)},34:function(e){return e-20}},isInside:function(i,t){var o=e(i),s=e(t),n=o.offset(),l=s.offset();return n.top>=l.top&&n.top+o.height()<=l.top+s.height()}},this.each(function(){if(void 0==i&&(i=o),"string"==typeof i){var n=e(this).data("scrollable");n&&n[i](t)}else{if("object"!=typeof i)throw"Invalid type of options";i=e.extend(o,i),new s(e(this),i)}})}}(jQuery),function(e){function i(i){var t=i||window.event,o=[].slice.call(arguments,1),s=0,n=0,l=0;return i=e.event.fix(t),i.type="mousewheel",t.wheelDelta&&(s=t.wheelDelta/120),t.detail&&(s=-t.detail/3),l=s,void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS&&(l=0,n=s),void 0!==t.wheelDeltaY&&(l=t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(n=t.wheelDeltaX/120),o.unshift(i,s,n,l),(e.event.dispatch||e.event.handle).apply(this,o)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var o=t.length;o;)e.event.fixHooks[t[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],i,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5jdXN0b20tc2Nyb2xsYmFyLmpzIl0sIm5hbWVzIjpbIiQiLCJmbiIsImN1c3RvbVNjcm9sbGJhciIsIm9wdGlvbnMiLCJhcmdzIiwiZGVmYXVsdE9wdGlvbnMiLCJza2luIiwidW5kZWZpbmVkIiwiaFNjcm9sbCIsInZTY3JvbGwiLCJ1cGRhdGVPbldpbmRvd1Jlc2l6ZSIsImFuaW1hdGlvblNwZWVkIiwib25DdXN0b21TY3JvbGwiLCJzd2lwZVNwZWVkIiwid2hlZWxTcGVlZCIsImZpeGVkVGh1bWJXaWR0aCIsImZpeGVkVGh1bWJIZWlnaHQiLCJwcmV2ZW50RGVmYXVsdFNjcm9sbCIsIlNjcm9sbGFibGUiLCJlbGVtZW50IiwidGhpcyIsIiRlbGVtZW50IiwiYWRkU2Nyb2xsYWJsZUNsYXNzIiwiYWRkU2tpbkNsYXNzIiwiYWRkU2Nyb2xsQmFyQ29tcG9uZW50cyIsInZTY3JvbGxiYXIiLCJTY3JvbGxiYXIiLCJWU2l6aW5nIiwiaFNjcm9sbGJhciIsIkhTaXppbmciLCJkYXRhIiwiaW5pdEtleWJvYXJkU2Nyb2xsaW5nIiwiYmluZEV2ZW50cyIsInByb3RvdHlwZSIsImhhc0NsYXNzIiwic2Nyb2xsYWJsZUFkZGVkIiwiYWRkQ2xhc3MiLCJyZW1vdmVTY3JvbGxhYmxlQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInNraW5DbGFzc0FkZGVkIiwicmVtb3ZlU2tpbkNsYXNzIiwiYXNzaWduVmlld1BvcnQiLCIkdmlld1BvcnQiLCJsZW5ndGgiLCJ3cmFwSW5uZXIiLCJ2aWV3UG9ydEFkZGVkIiwiYXNzaWduT3ZlcnZpZXciLCIkb3ZlcnZpZXciLCJvdmVydmlld0FkZGVkIiwiYWRkU2Nyb2xsQmFyIiwicmVtb3ZlU2Nyb2xsYmFyQ29tcG9uZW50cyIsInJlbW92ZVNjcm9sbGJhciIsInVud3JhcCIsIm9yaWVudGF0aW9uIiwiZmluZCIsInJlbW92ZSIsImZ1biIsInJlc2l6ZSIsImtlZXBQb3NpdGlvbiIsInNjcm9sbFRvIiwic2Nyb2xsVG9FbGVtZW50Iiwic2Nyb2xsVG9YWSIsIngiLCJ5Iiwic2Nyb2xsVG9YIiwic2Nyb2xsVG9ZIiwic2Nyb2xsT3ZlcnZpZXdUbyIsInNjcm9sbEJ5WCIsIm92ZXJ2aWV3UG9zaXRpb24iLCJzY3JvbGxCeVkiLCJyZW1vdmVLZXlib2FyZFNjcm9sbGluZyIsInNldEFuaW1hdGlvblNwZWVkIiwic3BlZWQiLCJpc0luc2lkZSIsIndyYXBwaW5nRWxlbWVudCIsIiR3cmFwcGluZ0VsZW1lbnQiLCJlbGVtZW50T2Zmc2V0Iiwib2Zmc2V0Iiwid3JhcHBpbmdFbGVtZW50T2Zmc2V0IiwidG9wIiwibGVmdCIsImhlaWdodCIsIndpZHRoIiwiX3RoaXMiLCJlbGVtZW50S2V5ZG93biIsImV2ZW50IiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50Iiwia2V5U2Nyb2xsIiwiYXR0ciIsImtleWRvd24iLCJyZW1vdmVBdHRyIiwidW5iaW5kIiwib24iLCJzY3JvbGxhYmxlIiwic2l6aW5nIiwiJHNjcm9sbEJhciIsInNjcm9sbEJhciIsIiR0aHVtYiIsInNldFNjcm9sbFBvc2l0aW9uIiwiaW5pdE1vdXNlTW92ZVNjcm9sbGluZyIsImluaXRNb3VzZVdoZWVsU2Nyb2xsaW5nIiwiaW5pdFRvdWNoU2Nyb2xsaW5nIiwiaW5pdE1vdXNlQ2xpY2tTY3JvbGxpbmciLCJpbml0V2luZG93UmVzaXplIiwib3ZlcnZpZXdTaXplIiwic2l6ZSIsImNhbGN1bGF0ZVZpZXdQb3J0U2l6ZSIsInZpZXdQb3J0U2l6ZSIsInJhdGlvIiwidGh1bWJTaXplIiwiY2FsY3VsYXRlVGh1bWJTaXplIiwibWF4VGh1bWJQb3NpdGlvbiIsImNhbGN1bGF0ZU1heFRodW1iUG9zaXRpb24iLCJtYXhPdmVydmlld1Bvc2l0aW9uIiwiY2FsY3VsYXRlTWF4T3ZlcnZpZXdQb3NpdGlvbiIsImVuYWJsZWQiLCJzY3JvbGxQZXJjZW50IiwicmVzY3JvbGwiLCJ0b2dnbGUiLCJlbGVtZW50U2l6ZSIsIm1heFNpemVVc2VkIiwibWF4U2l6ZSIsIk1hdGgiLCJtaW4iLCJmaXhlZFNpemUiLCJmaXhlZFRodW1iU2l6ZSIsIm1heCIsIm1pblNpemUiLCJtb3VzZWRvd24iLCJzdGFydE1vdXNlTW92ZVNjcm9sbGluZyIsImRvY3VtZW50TW91c2V1cCIsInN0b3BNb3VzZU1vdmVTY3JvbGxpbmciLCJtb3VzZXVwIiwiZG9jdW1lbnRNb3VzZW1vdmUiLCJtb3VzZU1vdmVTY3JvbGwiLCJtb3VzZW1vdmUiLCJjbGljayIsInN0b3BQcm9wYWdhdGlvbiIsInJlbW92ZU1vdXNlTW92ZVNjcm9sbGluZyIsIm1vdXNld2hlZWwiLCJkZWx0YSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbGVkIiwibW91c2VXaGVlbFNjcm9sbCIsInN0b3BFdmVudENvbmRpdGlvbmFsbHkiLCJyZW1vdmVNb3VzZVdoZWVsU2Nyb2xsaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVsZW1lbnRUb3VjaHN0YXJ0Iiwic3RhcnRUb3VjaFNjcm9sbGluZyIsImRvY3VtZW50VG91Y2htb3ZlIiwidG91Y2hTY3JvbGwiLCJlbGVtZW50VG91Y2hlbmQiLCJzdG9wVG91Y2hTY3JvbGxpbmciLCJyZW1vdmVUb3VjaFNjcm9sbGluZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzY3JvbGxCYXJDbGljayIsIm1vdXNlQ2xpY2tTY3JvbGwiLCJyZW1vdmVNb3VzZUNsaWNrU2Nyb2xsaW5nIiwid2luZG93UmVzaXplIiwid2luZG93IiwicmVtb3ZlV2luZG93UmVzaXplIiwiaXNLZXlTY3JvbGxpbmciLCJrZXkiLCJrZXlTY3JvbGxEZWx0YSIsInNjcm9sbGluZ0tleSIsInNjcm9sbGluZ0tleXMiLCJtb3VzZU1vdmVTY3JvbGxpbmciLCJzZXRVbnNlbGVjdGFibGUiLCJzZXRTY3JvbGxFdmVudCIsInByZXZlbnREZWZhdWx0IiwidmFsdWUiLCJtb3VzZURlbHRhIiwic2Nyb2xsRXZlbnQiLCJzY3JvbGxUaHVtYkJ5IiwidG91Y2hlcyIsInRvdWNoU2Nyb2xsaW5nIiwic2Nyb2xsT3ZlcnZpZXdCeSIsIndoZWVsRGVsdGEiLCJzY3JvbGxBeGlzIiwib2Zmc2V0Q29tcG9uZW50Iiwia2V5RG93biIsIndoaWNoIiwidGh1bWJQb3NpdGlvbiIsInBvc2l0aW9uT3JNYXgiLCJvbGRTY3JvbGxQZXJjZW50IiwidHJpZ2dlckN1c3RvbVNjcm9sbCIsInBvc2l0aW9uIiwiYW5pbWF0ZSIsInNldFNjcm9sbFBvc2l0aW9uV2l0aEFuaW1hdGlvbiIsInAiLCJ0cmlnZ2VyIiwiZGlyZWN0aW9uIiwic2Nyb2xsRGlyZWN0aW9uIiwiY3NzIiwidGh1bWJBbmltYXRpb25PcHRzIiwib3ZlcnZpZXdBbmltYXRpb25PcHRzIiwicGFnZVgiLCJwYWdlWSIsIm92ZXJ2aWV3T2Zmc2V0IiwiY29uZGl0aW9uIiwiJGVsIiwiYXJnIiwicGFyc2VJbnQiLCJldmVudDEiLCJldmVudDIiLCJvbGRQZXJjZW50IiwibmV3UGVyY2VudCIsIjM3IiwiMzkiLCIzOCIsIjQwIiwiMzMiLCIzNCIsImVhY2giLCJleHRlbmQiLCJqUXVlcnkiLCJoYW5kbGVyIiwib3JnRXZlbnQiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJmaXgiLCJ0eXBlIiwiZGV0YWlsIiwiYXhpcyIsIkhPUklaT05UQUxfQVhJUyIsIndoZWVsRGVsdGFZIiwid2hlZWxEZWx0YVgiLCJ1bnNoaWZ0IiwiZGlzcGF0Y2giLCJoYW5kbGUiLCJhcHBseSIsInR5cGVzIiwiZml4SG9va3MiLCJpIiwibW91c2VIb29rcyIsInNwZWNpYWwiLCJzZXR1cCIsIm9ubW91c2V3aGVlbCIsInRlYXJkb3duIiwiYmluZCIsInVubW91c2V3aGVlbCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsR0FFVEEsRUFBRUMsR0FBR0MsZ0JBQWtCLFNBQVVDLEVBQVNDLEdBRXhDLEdBQUlDLElBQ0ZDLEtBQU1DLE9BQ05DLFNBQVMsRUFDVEMsU0FBUyxFQUNUQyxzQkFBc0IsRUFDdEJDLGVBQWdCLElBQ2hCQyxlQUFnQkwsT0FDaEJNLFdBQVksRUFDWkMsV0FBWSxHQUNaQyxnQkFBaUJSLE9BQ2pCUyxpQkFB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LEVBQUVxRixNQUFNc0osU0FBVUQsSUFBUUUsSUFBTzVPLEVBQUVxRixNQUFNd0osVUFJN0M3TyxHQUFFcUYsTUFBTXlKLFFBQVFsRyxZQUNkbUcsTUFBTyxXQUNMLEdBQUkzTixLQUFLZ0ksaUJBQ1AsSUFBSyxHQUFJd0YsR0FBSUYsRUFBTS9MLE9BQVFpTSxHQUN6QnhOLEtBQUtnSSxpQkFBaUJzRixJQUFRRSxHQUFJbEIsR0FBUyxPQUc3Q3RNLE1BQUs0TixhQUFldEIsR0FJeEJ1QixTQUFVLFdBQ1IsR0FBSTdOLEtBQUt3SSxvQkFDUCxJQUFLLEdBQUlnRixHQUFJRixFQUFNL0wsT0FBUWlNLEdBQ3pCeE4sS0FBS3dJLG9CQUFvQjhFLElBQVFFLEdBQUlsQixHQUFTLE9BR2hEdE0sTUFBSzROLGFBQWUsT0FLMUJoUCxFQUFFQyxHQUFHdU4sUUFDSDVFLFdBQVksU0FBVTNJLEdBQ3BCLE1BQU9BLEdBQUttQixLQUFLOE4sS0FBSyxhQUFjalAsR0FBTW1CLEtBQUs0SyxRQUFRLGVBR3pEbUQsYUFBYyxTQUFVbFAsR0FDdEIsTUFBT21CLE1BQUt3RSxPQUFPLGFBQWMzRixPQXlDcEN3TiIsImZpbGUiOiJqcXVlcnkuY3VzdG9tLXNjcm9sbGJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoJCkge1xuXG4gICQuZm4uY3VzdG9tU2Nyb2xsYmFyID0gZnVuY3Rpb24gKG9wdGlvbnMsIGFyZ3MpIHtcblxuICAgIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgIHNraW46IHVuZGVmaW5lZCxcbiAgICAgIGhTY3JvbGw6IHRydWUsXG4gICAgICB2U2Nyb2xsOiB0cnVlLFxuICAgICAgdXBkYXRlT25XaW5kb3dSZXNpemU6IGZhbHNlLFxuICAgICAgYW5pbWF0aW9uU3BlZWQ6IDMwMCxcbiAgICAgIG9uQ3VzdG9tU2Nyb2xsOiB1bmRlZmluZWQsXG4gICAgICBzd2lwZVNwZWVkOiAxLFxuICAgICAgd2hlZWxTcGVlZDogNDAsXG4gICAgICBmaXhlZFRodW1iV2lkdGg6IHVuZGVmaW5lZCxcbiAgICAgIGZpeGVkVGh1bWJIZWlnaHQ6IHVuZGVmaW5lZCxcbiAgICAgIHByZXZlbnREZWZhdWx0U2Nyb2xsOiBmYWxzZVxuICAgIH1cblxuICAgIHZhciBTY3JvbGxhYmxlID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMuYWRkU2Nyb2xsYWJsZUNsYXNzKCk7XG4gICAgICB0aGlzLmFkZFNraW5DbGFzcygpO1xuICAgICAgdGhpcy5hZGRTY3JvbGxCYXJDb21wb25lbnRzKCk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnZTY3JvbGwpXG4gICAgICAgIHRoaXMudlNjcm9sbGJhciA9IG5ldyBTY3JvbGxiYXIodGhpcywgbmV3IFZTaXppbmcoKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhTY3JvbGwpXG4gICAgICAgIHRoaXMuaFNjcm9sbGJhciA9IG5ldyBTY3JvbGxiYXIodGhpcywgbmV3IEhTaXppbmcoKSk7XG4gICAgICB0aGlzLiRlbGVtZW50LmRhdGEoXCJzY3JvbGxhYmxlXCIsIHRoaXMpO1xuICAgICAgdGhpcy5pbml0S2V5Ym9hcmRTY3JvbGxpbmcoKTtcbiAgICAgIHRoaXMuYmluZEV2ZW50cygpO1xuICAgIH1cblxuICAgIFNjcm9sbGFibGUucHJvdG90eXBlID0ge1xuXG4gICAgICBhZGRTY3JvbGxhYmxlQ2xhc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwic2Nyb2xsYWJsZVwiKSkge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsYWJsZUFkZGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LmFkZENsYXNzKFwic2Nyb2xsYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcmVtb3ZlU2Nyb2xsYWJsZUNsYXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbGFibGVBZGRlZClcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwic2Nyb2xsYWJsZVwiKTtcbiAgICAgIH0sXG5cbiAgICAgIGFkZFNraW5DbGFzczogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodHlwZW9mKHRoaXMub3B0aW9ucy5za2luKSA9PSBcInN0cmluZ1wiICYmICF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKHRoaXMub3B0aW9ucy5za2luKSkge1xuICAgICAgICAgIHRoaXMuc2tpbkNsYXNzQWRkZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLnNraW4pO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVTa2luQ2xhc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2tpbkNsYXNzQWRkZWQpXG4gICAgICAgICAgdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuc2tpbik7XG4gICAgICB9LFxuXG4gICAgICBhZGRTY3JvbGxCYXJDb21wb25lbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuYXNzaWduVmlld1BvcnQoKTtcbiAgICAgICAgaWYgKHRoaXMuJHZpZXdQb3J0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgdGhpcy4kZWxlbWVudC53cmFwSW5uZXIoXCI8ZGl2IGNsYXNzPVxcXCJ2aWV3cG9ydFxcXCIgLz5cIik7XG4gICAgICAgICAgdGhpcy5hc3NpZ25WaWV3UG9ydCgpO1xuICAgICAgICAgIHRoaXMudmlld1BvcnRBZGRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hc3NpZ25PdmVydmlldygpO1xuICAgICAgICBpZiAodGhpcy4kb3ZlcnZpZXcubGVuZ3RoID09IDApIHtcbiAgICAgICAgICB0aGlzLiR2aWV3UG9ydC53cmFwSW5uZXIoXCI8ZGl2IGNsYXNzPVxcXCJvdmVydmlld1xcXCIgLz5cIik7XG4gICAgICAgICAgdGhpcy5hc3NpZ25PdmVydmlldygpO1xuICAgICAgICAgIHRoaXMub3ZlcnZpZXdBZGRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRTY3JvbGxCYXIoXCJ2ZXJ0aWNhbFwiLCBcInByZXBlbmRcIik7XG4gICAgICAgIHRoaXMuYWRkU2Nyb2xsQmFyKFwiaG9yaXpvbnRhbFwiLCBcImFwcGVuZFwiKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZVNjcm9sbGJhckNvbXBvbmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTY3JvbGxiYXIoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgICAgdGhpcy5yZW1vdmVTY3JvbGxiYXIoXCJob3Jpem9udGFsXCIpO1xuICAgICAgICBpZiAodGhpcy5vdmVydmlld0FkZGVkKVxuICAgICAgICAgIHRoaXMuJGVsZW1lbnQudW53cmFwKCk7XG4gICAgICAgIGlmICh0aGlzLnZpZXdQb3J0QWRkZWQpXG4gICAgICAgICAgdGhpcy4kZWxlbWVudC51bndyYXAoKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZVNjcm9sbGJhcjogZnVuY3Rpb24gKG9yaWVudGF0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzW29yaWVudGF0aW9uICsgXCJTY3JvbGxiYXJBZGRlZFwiXSlcbiAgICAgICAgICB0aGlzLiRlbGVtZW50LmZpbmQoXCIuc2Nyb2xsLWJhci5cIiArIG9yaWVudGF0aW9uKS5yZW1vdmUoKTtcbiAgICAgIH0sXG5cbiAgICAgIGFzc2lnblZpZXdQb3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuJHZpZXdQb3J0ID0gdGhpcy4kZWxlbWVudC5maW5kKFwiLnZpZXdwb3J0XCIpO1xuICAgICAgfSxcblxuICAgICAgYXNzaWduT3ZlcnZpZXc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kb3ZlcnZpZXcgPSB0aGlzLiR2aWV3UG9ydC5maW5kKFwiLm92ZXJ2aWV3XCIpO1xuICAgICAgfSxcblxuICAgICAgYWRkU2Nyb2xsQmFyOiBmdW5jdGlvbiAob3JpZW50YXRpb24sIGZ1bikge1xuICAgICAgICBpZiAodGhpcy4kZWxlbWVudC5maW5kKFwiLnNjcm9sbC1iYXIuXCIgKyBvcmllbnRhdGlvbikubGVuZ3RoID09IDApIHtcbiAgICAgICAgICB0aGlzLiRlbGVtZW50W2Z1bl0oXCI8ZGl2IGNsYXNzPSdzY3JvbGwtYmFyIFwiICsgb3JpZW50YXRpb24gKyBcIic+PGRpdiBjbGFzcz0ndGh1bWInPjwvZGl2PjwvZGl2PlwiKVxuICAgICAgICAgIHRoaXNbb3JpZW50YXRpb24gKyBcIlNjcm9sbGJhckFkZGVkXCJdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgcmVzaXplOiBmdW5jdGlvbiAoa2VlcFBvc2l0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLnZTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy52U2Nyb2xsYmFyLnJlc2l6ZShrZWVwUG9zaXRpb24pO1xuICAgICAgICBpZiAodGhpcy5oU2Nyb2xsYmFyKVxuICAgICAgICAgIHRoaXMuaFNjcm9sbGJhci5yZXNpemUoa2VlcFBvc2l0aW9uKTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbFRvOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy52U2Nyb2xsYmFyKVxuICAgICAgICAgIHRoaXMudlNjcm9sbGJhci5zY3JvbGxUb0VsZW1lbnQoZWxlbWVudCk7XG4gICAgICAgIGlmICh0aGlzLmhTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy5oU2Nyb2xsYmFyLnNjcm9sbFRvRWxlbWVudChlbGVtZW50KTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbFRvWFk6IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9YKHgpO1xuICAgICAgICB0aGlzLnNjcm9sbFRvWSh5KTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbFRvWDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKHRoaXMuaFNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLmhTY3JvbGxiYXIuc2Nyb2xsT3ZlcnZpZXdUbyh4LCB0cnVlKTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbFRvWTogZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgaWYgKHRoaXMudlNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLnZTY3JvbGxiYXIuc2Nyb2xsT3ZlcnZpZXdUbyh5LCB0cnVlKTtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbEJ5WDogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKHRoaXMuaFNjcm9sbGJhcilcbiAgICAgICAgICB0aGlzLnNjcm9sbFRvWCh0aGlzLmhTY3JvbGxiYXIub3ZlcnZpZXdQb3NpdGlvbigpICsgeCk7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxCeVk6IGZ1bmN0aW9uICh5KSB7XG4gICAgICAgIGlmICh0aGlzLnZTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy5zY3JvbGxUb1kodGhpcy52U2Nyb2xsYmFyLm92ZXJ2aWV3UG9zaXRpb24oKSArIHkpO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlU2Nyb2xsYWJsZUNsYXNzKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlU2tpbkNsYXNzKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlU2Nyb2xsYmFyQ29tcG9uZW50cygpO1xuICAgICAgICB0aGlzLiRlbGVtZW50LmRhdGEoXCJzY3JvbGxhYmxlXCIsIG51bGwpO1xuICAgICAgICB0aGlzLnJlbW92ZUtleWJvYXJkU2Nyb2xsaW5nKCk7XG4gICAgICAgIGlmICh0aGlzLnZTY3JvbGxiYXIpXG4gICAgICAgICAgdGhpcy52U2Nyb2xsYmFyLnJlbW92ZSgpO1xuICAgICAgICBpZiAodGhpcy5oU2Nyb2xsYmFyKVxuICAgICAgICAgIHRoaXMuaFNjcm9sbGJhci5yZW1vdmUoKTtcbiAgICAgIH0sXG5cbiAgICAgIHNldEFuaW1hdGlvblNwZWVkOiBmdW5jdGlvbiAoc3BlZWQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmFuaW1hdGlvblNwZWVkID0gc3BlZWQ7XG4gICAgICB9LFxuXG4gICAgICBpc0luc2lkZTogZnVuY3Rpb24gKGVsZW1lbnQsIHdyYXBwaW5nRWxlbWVudCkge1xuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgICB2YXIgJHdyYXBwaW5nRWxlbWVudCA9ICQod3JhcHBpbmdFbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnRPZmZzZXQgPSAkZWxlbWVudC5vZmZzZXQoKTtcbiAgICAgICAgdmFyIHdyYXBwaW5nRWxlbWVudE9mZnNldCA9ICR3cmFwcGluZ0VsZW1lbnQub2Zmc2V0KCk7XG4gICAgICAgIHJldHVybiAoZWxlbWVudE9mZnNldC50b3AgPj0gd3JhcHBpbmdFbGVtZW50T2Zmc2V0LnRvcCkgJiYgKGVsZW1lbnRPZmZzZXQubGVmdCA+PSB3cmFwcGluZ0VsZW1lbnRPZmZzZXQubGVmdCkgJiZcbiAgICAgICAgICAoZWxlbWVudE9mZnNldC50b3AgKyAkZWxlbWVudC5oZWlnaHQoKSA8PSB3cmFwcGluZ0VsZW1lbnRPZmZzZXQudG9wICsgJHdyYXBwaW5nRWxlbWVudC5oZWlnaHQoKSkgJiZcbiAgICAgICAgICAoZWxlbWVudE9mZnNldC5sZWZ0ICsgJGVsZW1lbnQud2lkdGgoKSA8PSB3cmFwcGluZ0VsZW1lbnRPZmZzZXQubGVmdCArICR3cmFwcGluZ0VsZW1lbnQud2lkdGgoKSlcbiAgICAgIH0sXG5cbiAgICAgIGluaXRLZXlib2FyZFNjcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuZWxlbWVudEtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gX3RoaXMuJGVsZW1lbnRbMF0pIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy52U2Nyb2xsYmFyKVxuICAgICAgICAgICAgICBfdGhpcy52U2Nyb2xsYmFyLmtleVNjcm9sbChldmVudCk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuaFNjcm9sbGJhcilcbiAgICAgICAgICAgICAgX3RoaXMuaFNjcm9sbGJhci5rZXlTY3JvbGwoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGVsZW1lbnRcbiAgICAgICAgICAuYXR0cigndGFiaW5kZXgnLCAnLTEnKVxuICAgICAgICAgIC5rZXlkb3duKHRoaXMuZWxlbWVudEtleWRvd24pO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlS2V5Ym9hcmRTY3JvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAgIC5yZW1vdmVBdHRyKCd0YWJpbmRleCcpXG4gICAgICAgICAgLnVuYmluZChcImtleWRvd25cIiwgdGhpcy5lbGVtZW50S2V5ZG93bik7XG4gICAgICB9LFxuXG4gICAgICBiaW5kRXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMub25DdXN0b21TY3JvbGwpXG4gICAgICAgICAgdGhpcy4kZWxlbWVudC5vbihcImN1c3RvbVNjcm9sbFwiLCB0aGlzLm9wdGlvbnMub25DdXN0b21TY3JvbGwpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgdmFyIFNjcm9sbGJhciA9IGZ1bmN0aW9uIChzY3JvbGxhYmxlLCBzaXppbmcpIHtcbiAgICAgIHRoaXMuc2Nyb2xsYWJsZSA9IHNjcm9sbGFibGU7XG4gICAgICB0aGlzLnNpemluZyA9IHNpemluZ1xuICAgICAgdGhpcy4kc2Nyb2xsQmFyID0gdGhpcy5zaXppbmcuc2Nyb2xsQmFyKHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudCk7XG4gICAgICB0aGlzLiR0aHVtYiA9IHRoaXMuJHNjcm9sbEJhci5maW5kKFwiLnRodW1iXCIpO1xuICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbigwLCAwKTtcbiAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgICB0aGlzLmluaXRNb3VzZU1vdmVTY3JvbGxpbmcoKTtcbiAgICAgIHRoaXMuaW5pdE1vdXNlV2hlZWxTY3JvbGxpbmcoKTtcbiAgICAgIHRoaXMuaW5pdFRvdWNoU2Nyb2xsaW5nKCk7XG4gICAgICB0aGlzLmluaXRNb3VzZUNsaWNrU2Nyb2xsaW5nKCk7XG4gICAgICB0aGlzLmluaXRXaW5kb3dSZXNpemUoKTtcbiAgICB9XG5cbiAgICBTY3JvbGxiYXIucHJvdG90eXBlID0ge1xuXG4gICAgICByZXNpemU6IGZ1bmN0aW9uIChrZWVwUG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5vdmVydmlld1NpemUgPSB0aGlzLnNpemluZy5zaXplKHRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZVZpZXdQb3J0U2l6ZSgpO1xuICAgICAgICB0aGlzLnNpemluZy5zaXplKHRoaXMuc2Nyb2xsYWJsZS4kdmlld1BvcnQsIHRoaXMudmlld1BvcnRTaXplKTtcbiAgICAgICAgdGhpcy5yYXRpbyA9IHRoaXMudmlld1BvcnRTaXplIC8gdGhpcy5vdmVydmlld1NpemU7XG4gICAgICAgIHRoaXMuc2l6aW5nLnNpemUodGhpcy4kc2Nyb2xsQmFyLCB0aGlzLnZpZXdQb3J0U2l6ZSk7XG4gICAgICAgIHRoaXMudGh1bWJTaXplID0gdGhpcy5jYWxjdWxhdGVUaHVtYlNpemUoKTtcbiAgICAgICAgdGhpcy5zaXppbmcuc2l6ZSh0aGlzLiR0aHVtYiwgdGhpcy50aHVtYlNpemUpO1xuICAgICAgICB0aGlzLm1heFRodW1iUG9zaXRpb24gPSB0aGlzLmNhbGN1bGF0ZU1heFRodW1iUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5tYXhPdmVydmlld1Bvc2l0aW9uID0gdGhpcy5jYWxjdWxhdGVNYXhPdmVydmlld1Bvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMuZW5hYmxlZCA9ICh0aGlzLm92ZXJ2aWV3U2l6ZSA+IHRoaXMudmlld1BvcnRTaXplKTtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsUGVyY2VudCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHRoaXMuc2Nyb2xsUGVyY2VudCA9IDAuMDtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZClcbiAgICAgICAgICB0aGlzLnJlc2Nyb2xsKGtlZXBQb3NpdGlvbik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKDAsIDApO1xuICAgICAgICB0aGlzLiRzY3JvbGxCYXIudG9nZ2xlKHRoaXMuZW5hYmxlZCk7XG4gICAgICB9LFxuXG4gICAgICBjYWxjdWxhdGVWaWV3UG9ydFNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRTaXplID0gdGhpcy5zaXppbmcuc2l6ZSh0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnQpO1xuICAgICAgICBpZiAoZWxlbWVudFNpemUgPiAwICYmICF0aGlzLm1heFNpemVVc2VkKSB7XG4gICAgICAgICAgdGhpcy52aWV3UG9ydFNpemUgPSBlbGVtZW50U2l6ZTtcbiAgICAgICAgICB0aGlzLm1heFNpemVVc2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIG1heFNpemUgPSB0aGlzLnNpemluZy5tYXhTaXplKHRoaXMuc2Nyb2xsYWJsZS4kZWxlbWVudCk7XG4gICAgICAgICAgdGhpcy52aWV3UG9ydFNpemUgPSBNYXRoLm1pbihtYXhTaXplLCB0aGlzLm92ZXJ2aWV3U2l6ZSk7XG4gICAgICAgICAgdGhpcy5tYXhTaXplVXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGNhbGN1bGF0ZVRodW1iU2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZml4ZWRTaXplID0gdGhpcy5zaXppbmcuZml4ZWRUaHVtYlNpemUodGhpcy5zY3JvbGxhYmxlLm9wdGlvbnMpXG4gICAgICAgIHZhciBzaXplO1xuICAgICAgICBpZiAoZml4ZWRTaXplKVxuICAgICAgICAgIHNpemUgPSBmaXhlZFNpemU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzaXplID0gdGhpcy5yYXRpbyAqIHRoaXMudmlld1BvcnRTaXplXG4gICAgICAgIHJldHVybiBNYXRoLm1heChzaXplLCB0aGlzLnNpemluZy5taW5TaXplKHRoaXMuJHRodW1iKSk7XG4gICAgICB9LFxuXG4gICAgICBpbml0TW91c2VNb3ZlU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuJHRodW1iLm1vdXNlZG93bihmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoX3RoaXMuZW5hYmxlZClcbiAgICAgICAgICAgIF90aGlzLnN0YXJ0TW91c2VNb3ZlU2Nyb2xsaW5nKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRNb3VzZXVwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgX3RoaXMuc3RvcE1vdXNlTW92ZVNjcm9sbGluZyhldmVudCk7XG4gICAgICAgIH07XG4gICAgICAgICQoZG9jdW1lbnQpLm1vdXNldXAodGhpcy5kb2N1bWVudE1vdXNldXApO1xuICAgICAgICB0aGlzLmRvY3VtZW50TW91c2Vtb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgX3RoaXMubW91c2VNb3ZlU2Nyb2xsKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgJChkb2N1bWVudCkubW91c2Vtb3ZlKHRoaXMuZG9jdW1lbnRNb3VzZW1vdmUpO1xuICAgICAgICB0aGlzLiR0aHVtYi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVNb3VzZU1vdmVTY3JvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kdGh1bWIudW5iaW5kKCk7XG4gICAgICAgICQoZG9jdW1lbnQpLnVuYmluZChcIm1vdXNldXBcIiwgdGhpcy5kb2N1bWVudE1vdXNldXApO1xuICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoXCJtb3VzZW1vdmVcIiwgdGhpcy5kb2N1bWVudE1vdXNlbW92ZSk7XG4gICAgICB9LFxuXG4gICAgICBpbml0TW91c2VXaGVlbFNjcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnQubW91c2V3aGVlbChmdW5jdGlvbiAoZXZlbnQsIGRlbHRhLCBkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICAgIGlmIChfdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsZWQgPSBfdGhpcy5tb3VzZVdoZWVsU2Nyb2xsKGRlbHRhWCwgZGVsdGFZKTtcbiAgICAgICAgICAgIF90aGlzLnN0b3BFdmVudENvbmRpdGlvbmFsbHkoZXZlbnQsIHNjcm9sbGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlTW91c2VXaGVlbFNjcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnQudW5iaW5kKFwibW91c2V3aGVlbFwiKTtcbiAgICAgIH0sXG5cbiAgICAgIGluaXRUb3VjaFNjcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgdGhpcy5lbGVtZW50VG91Y2hzdGFydCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLmVuYWJsZWQpXG4gICAgICAgICAgICAgIF90aGlzLnN0YXJ0VG91Y2hTY3JvbGxpbmcoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5lbGVtZW50VG91Y2hzdGFydCk7XG4gICAgICAgICAgdGhpcy5kb2N1bWVudFRvdWNobW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMudG91Y2hTY3JvbGwoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnNjcm9sbGFibGUuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLmRvY3VtZW50VG91Y2htb3ZlKTtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRUb3VjaGVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgX3RoaXMuc3RvcFRvdWNoU2Nyb2xsaW5nKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zY3JvbGxhYmxlLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLmVsZW1lbnRUb3VjaGVuZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZVRvdWNoU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgdGhpcy5zY3JvbGxhYmxlLiRlbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuZWxlbWVudFRvdWNoc3RhcnQpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5kb2N1bWVudFRvdWNobW92ZSk7XG4gICAgICAgICAgdGhpcy5zY3JvbGxhYmxlLiRlbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLmVsZW1lbnRUb3VjaGVuZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGluaXRNb3VzZUNsaWNrU2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuc2Nyb2xsQmFyQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBfdGhpcy5tb3VzZUNsaWNrU2Nyb2xsKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy4kc2Nyb2xsQmFyLmNsaWNrKHRoaXMuc2Nyb2xsQmFyQ2xpY2spO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlTW91c2VDbGlja1Njcm9sbGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLiRzY3JvbGxCYXIudW5iaW5kKFwiY2xpY2tcIiwgdGhpcy5zY3JvbGxCYXJDbGljayk7XG4gICAgICB9LFxuXG4gICAgICBpbml0V2luZG93UmVzaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbGFibGUub3B0aW9ucy51cGRhdGVPbldpbmRvd1Jlc2l6ZSkge1xuICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgdGhpcy53aW5kb3dSZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5yZXNpemUoKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgICQod2luZG93KS5yZXNpemUodGhpcy53aW5kb3dSZXNpemUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZW1vdmVXaW5kb3dSZXNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh3aW5kb3cpLnVuYmluZChcInJlc2l6ZVwiLCB0aGlzLndpbmRvd1Jlc2l6ZSk7XG4gICAgICB9LFxuXG4gICAgICBpc0tleVNjcm9sbGluZzogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlTY3JvbGxEZWx0YShrZXkpICE9IG51bGw7XG4gICAgICB9LFxuXG4gICAgICBrZXlTY3JvbGxEZWx0YTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBmb3IgKHZhciBzY3JvbGxpbmdLZXkgaW4gdGhpcy5zaXppbmcuc2Nyb2xsaW5nS2V5cylcbiAgICAgICAgICBpZiAoc2Nyb2xsaW5nS2V5ID09IGtleSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpemluZy5zY3JvbGxpbmdLZXlzW2tleV0odGhpcy52aWV3UG9ydFNpemUpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIHN0YXJ0TW91c2VNb3ZlU2Nyb2xsaW5nOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5tb3VzZU1vdmVTY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcIm5vdC1zZWxlY3RhYmxlXCIpO1xuICAgICAgICB0aGlzLnNldFVuc2VsZWN0YWJsZSgkKFwiYm9keVwiKSwgXCJvblwiKTtcbiAgICAgICAgdGhpcy5zZXRTY3JvbGxFdmVudChldmVudCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9LFxuXG4gICAgICBzdG9wTW91c2VNb3ZlU2Nyb2xsaW5nOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5tb3VzZU1vdmVTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJub3Qtc2VsZWN0YWJsZVwiKTtcbiAgICAgICAgdGhpcy5zZXRVbnNlbGVjdGFibGUoJChcImJvZHlcIiksIG51bGwpO1xuICAgICAgfSxcblxuICAgICAgc2V0VW5zZWxlY3RhYmxlOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuYXR0cihcInVuc2VsZWN0YWJsZVwiKSAhPSB2YWx1ZSkge1xuICAgICAgICAgIGVsZW1lbnQuYXR0cihcInVuc2VsZWN0YWJsZVwiLCB2YWx1ZSk7XG4gICAgICAgICAgZWxlbWVudC5maW5kKCc6bm90KGlucHV0KScpLmF0dHIoJ3Vuc2VsZWN0YWJsZScsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgbW91c2VNb3ZlU2Nyb2xsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMubW91c2VNb3ZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgdmFyIGRlbHRhID0gdGhpcy5zaXppbmcubW91c2VEZWx0YSh0aGlzLnNjcm9sbEV2ZW50LCBldmVudCk7XG4gICAgICAgICAgdGhpcy5zY3JvbGxUaHVtYkJ5KGRlbHRhKTtcbiAgICAgICAgICB0aGlzLnNldFNjcm9sbEV2ZW50KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc3RhcnRUb3VjaFNjcm9sbGluZzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICB0aGlzLnNldFNjcm9sbEV2ZW50KGV2ZW50LnRvdWNoZXNbMF0pO1xuICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB0b3VjaFNjcm9sbDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRvdWNoU2Nyb2xsaW5nICYmIGV2ZW50LnRvdWNoZXMgJiYgZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIHZhciBkZWx0YSA9IC10aGlzLnNpemluZy5tb3VzZURlbHRhKHRoaXMuc2Nyb2xsRXZlbnQsIGV2ZW50LnRvdWNoZXNbMF0pICogdGhpcy5zY3JvbGxhYmxlLm9wdGlvbnMuc3dpcGVTcGVlZDtcbiAgICAgICAgICB2YXIgc2Nyb2xsZWQgPSB0aGlzLnNjcm9sbE92ZXJ2aWV3QnkoZGVsdGEpO1xuICAgICAgICAgIGlmIChzY3JvbGxlZClcbiAgICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsRXZlbnQoZXZlbnQudG91Y2hlc1swXSk7XG4gICAgICAgICAgdGhpcy5zdG9wRXZlbnRDb25kaXRpb25hbGx5KGV2ZW50LCBzY3JvbGxlZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHN0b3BUb3VjaFNjcm9sbGluZzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMudG91Y2hTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICBtb3VzZVdoZWVsU2Nyb2xsOiBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgdmFyIGRlbHRhID0gLXRoaXMuc2l6aW5nLndoZWVsRGVsdGEoZGVsdGFYLCBkZWx0YVkpICogdGhpcy5zY3JvbGxhYmxlLm9wdGlvbnMud2hlZWxTcGVlZDtcbiAgICAgICAgaWYgKGRlbHRhICE9IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsT3ZlcnZpZXdCeShkZWx0YSk7XG4gICAgICB9LFxuXG4gICAgICBtb3VzZUNsaWNrU2Nyb2xsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGRlbHRhID0gdGhpcy52aWV3UG9ydFNpemUgLSAyMDtcbiAgICAgICAgaWYgKGV2ZW50W1wicGFnZVwiICsgdGhpcy5zaXppbmcuc2Nyb2xsQXhpcygpXSA8IHRoaXMuJHRodW1iLm9mZnNldCgpW3RoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpXSlcbiAgICAgICAgLy8gbW91c2UgY2xpY2sgb3ZlciB0aHVtYlxuICAgICAgICAgIGRlbHRhID0gLWRlbHRhO1xuICAgICAgICB0aGlzLnNjcm9sbE92ZXJ2aWV3QnkoZGVsdGEpO1xuICAgICAgfSxcblxuICAgICAga2V5U2Nyb2xsOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGtleURvd24gPSBldmVudC53aGljaDtcbiAgICAgICAgaWYgKHRoaXMuZW5hYmxlZCAmJiB0aGlzLmlzS2V5U2Nyb2xsaW5nKGtleURvd24pKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbGVkID0gdGhpcy5zY3JvbGxPdmVydmlld0J5KHRoaXMua2V5U2Nyb2xsRGVsdGEoa2V5RG93bikpO1xuICAgICAgICAgIHRoaXMuc3RvcEV2ZW50Q29uZGl0aW9uYWxseShldmVudCwgc2Nyb2xsZWQpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxUaHVtYkJ5OiBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgICAgdmFyIHRodW1iUG9zaXRpb24gPSB0aGlzLnRodW1iUG9zaXRpb24oKTtcbiAgICAgICAgdGh1bWJQb3NpdGlvbiArPSBkZWx0YTtcbiAgICAgICAgdGh1bWJQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Pck1heCh0aHVtYlBvc2l0aW9uLCB0aGlzLm1heFRodW1iUG9zaXRpb24pO1xuICAgICAgICB2YXIgb2xkU2Nyb2xsUGVyY2VudCA9IHRoaXMuc2Nyb2xsUGVyY2VudDtcbiAgICAgICAgdGhpcy5zY3JvbGxQZXJjZW50ID0gdGh1bWJQb3NpdGlvbiAvIHRoaXMubWF4VGh1bWJQb3NpdGlvbjtcbiAgICAgICAgaWYgKG9sZFNjcm9sbFBlcmNlbnQgIT0gdGhpcy5zY3JvbGxQZXJjZW50KSB7XG4gICAgICAgICAgdmFyIG92ZXJ2aWV3UG9zaXRpb24gPSAodGh1bWJQb3NpdGlvbiAqIHRoaXMubWF4T3ZlcnZpZXdQb3NpdGlvbikgLyB0aGlzLm1heFRodW1iUG9zaXRpb247XG4gICAgICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbihvdmVydmlld1Bvc2l0aW9uLCB0aHVtYlBvc2l0aW9uKTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXJDdXN0b21TY3JvbGwob2xkU2Nyb2xsUGVyY2VudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcblxuICAgICAgdGh1bWJQb3NpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdGh1bWIucG9zaXRpb24oKVt0aGlzLnNpemluZy5vZmZzZXRDb21wb25lbnQoKV07XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxPdmVydmlld0J5OiBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgICAgdmFyIG92ZXJ2aWV3UG9zaXRpb24gPSB0aGlzLm92ZXJ2aWV3UG9zaXRpb24oKSArIGRlbHRhO1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxPdmVydmlld1RvKG92ZXJ2aWV3UG9zaXRpb24sIGZhbHNlKTtcbiAgICAgIH0sXG5cbiAgICAgIG92ZXJ2aWV3UG9zaXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC10aGlzLnNjcm9sbGFibGUuJG92ZXJ2aWV3LnBvc2l0aW9uKClbdGhpcy5zaXppbmcub2Zmc2V0Q29tcG9uZW50KCldO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsT3ZlcnZpZXdUbzogZnVuY3Rpb24gKG92ZXJ2aWV3UG9zaXRpb24sIGFuaW1hdGUpIHtcbiAgICAgICAgb3ZlcnZpZXdQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Pck1heChvdmVydmlld1Bvc2l0aW9uLCB0aGlzLm1heE92ZXJ2aWV3UG9zaXRpb24pO1xuICAgICAgICB2YXIgb2xkU2Nyb2xsUGVyY2VudCA9IHRoaXMuc2Nyb2xsUGVyY2VudDtcbiAgICAgICAgdGhpcy5zY3JvbGxQZXJjZW50ID0gb3ZlcnZpZXdQb3NpdGlvbiAvIHRoaXMubWF4T3ZlcnZpZXdQb3NpdGlvbjtcbiAgICAgICAgaWYgKG9sZFNjcm9sbFBlcmNlbnQgIT0gdGhpcy5zY3JvbGxQZXJjZW50KSB7XG4gICAgICAgICAgdmFyIHRodW1iUG9zaXRpb24gPSB0aGlzLnNjcm9sbFBlcmNlbnQgKiB0aGlzLm1heFRodW1iUG9zaXRpb247XG4gICAgICAgICAgaWYgKGFuaW1hdGUpXG4gICAgICAgICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uV2l0aEFuaW1hdGlvbihvdmVydmlld1Bvc2l0aW9uLCB0aHVtYlBvc2l0aW9uKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKG92ZXJ2aWV3UG9zaXRpb24sIHRodW1iUG9zaXRpb24pO1xuICAgICAgICAgIHRoaXMudHJpZ2dlckN1c3RvbVNjcm9sbChvbGRTY3JvbGxQZXJjZW50KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcblxuICAgICAgcG9zaXRpb25Pck1heDogZnVuY3Rpb24gKHAsIG1heCkge1xuICAgICAgICBpZiAocCA8IDApXG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIGVsc2UgaWYgKHAgPiBtYXgpXG4gICAgICAgICAgcmV0dXJuIG1heDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBwO1xuICAgICAgfSxcblxuICAgICAgdHJpZ2dlckN1c3RvbVNjcm9sbDogZnVuY3Rpb24gKG9sZFNjcm9sbFBlcmNlbnQpIHtcbiAgICAgICAgdGhpcy5zY3JvbGxhYmxlLiRlbGVtZW50LnRyaWdnZXIoXCJjdXN0b21TY3JvbGxcIiwge1xuICAgICAgICAgICAgc2Nyb2xsQXhpczogdGhpcy5zaXppbmcuc2Nyb2xsQXhpcygpLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiB0aGlzLnNpemluZy5zY3JvbGxEaXJlY3Rpb24ob2xkU2Nyb2xsUGVyY2VudCwgdGhpcy5zY3JvbGxQZXJjZW50KSxcbiAgICAgICAgICAgIHNjcm9sbFBlcmNlbnQ6IHRoaXMuc2Nyb2xsUGVyY2VudCAqIDEwMFxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlc2Nyb2xsOiBmdW5jdGlvbiAoa2VlcFBvc2l0aW9uKSB7XG4gICAgICAgIGlmIChrZWVwUG9zaXRpb24pIHtcbiAgICAgICAgICB2YXIgb3ZlcnZpZXdQb3NpdGlvbiA9IHRoaXMucG9zaXRpb25Pck1heCh0aGlzLm92ZXJ2aWV3UG9zaXRpb24oKSwgdGhpcy5tYXhPdmVydmlld1Bvc2l0aW9uKTtcbiAgICAgICAgICB0aGlzLnNjcm9sbFBlcmNlbnQgPSBvdmVydmlld1Bvc2l0aW9uIC8gdGhpcy5tYXhPdmVydmlld1Bvc2l0aW9uO1xuICAgICAgICAgIHZhciB0aHVtYlBvc2l0aW9uID0gdGhpcy5zY3JvbGxQZXJjZW50ICogdGhpcy5tYXhUaHVtYlBvc2l0aW9uO1xuICAgICAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb24ob3ZlcnZpZXdQb3NpdGlvbiwgdGh1bWJQb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIHRodW1iUG9zaXRpb24gPSB0aGlzLnNjcm9sbFBlcmNlbnQgKiB0aGlzLm1heFRodW1iUG9zaXRpb247XG4gICAgICAgICAgdmFyIG92ZXJ2aWV3UG9zaXRpb24gPSB0aGlzLnNjcm9sbFBlcmNlbnQgKiB0aGlzLm1heE92ZXJ2aWV3UG9zaXRpb247XG4gICAgICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbihvdmVydmlld1Bvc2l0aW9uLCB0aHVtYlBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc2V0U2Nyb2xsUG9zaXRpb246IGZ1bmN0aW9uIChvdmVydmlld1Bvc2l0aW9uLCB0aHVtYlBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuJHRodW1iLmNzcyh0aGlzLnNpemluZy5vZmZzZXRDb21wb25lbnQoKSwgdGh1bWJQb3NpdGlvbiArIFwicHhcIik7XG4gICAgICAgIHRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcuY3NzKHRoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpLCAtb3ZlcnZpZXdQb3NpdGlvbiArIFwicHhcIik7XG4gICAgICB9LFxuXG4gICAgICBzZXRTY3JvbGxQb3NpdGlvbldpdGhBbmltYXRpb246IGZ1bmN0aW9uIChvdmVydmlld1Bvc2l0aW9uLCB0aHVtYlBvc2l0aW9uKSB7XG4gICAgICAgIHZhciB0aHVtYkFuaW1hdGlvbk9wdHMgPSB7fTtcbiAgICAgICAgdmFyIG92ZXJ2aWV3QW5pbWF0aW9uT3B0cyA9IHt9O1xuICAgICAgICB0aHVtYkFuaW1hdGlvbk9wdHNbdGhpcy5zaXppbmcub2Zmc2V0Q29tcG9uZW50KCldID0gdGh1bWJQb3NpdGlvbiArIFwicHhcIjtcbiAgICAgICAgdGhpcy4kdGh1bWIuYW5pbWF0ZSh0aHVtYkFuaW1hdGlvbk9wdHMsIHRoaXMuc2Nyb2xsYWJsZS5vcHRpb25zLmFuaW1hdGlvblNwZWVkKTtcbiAgICAgICAgb3ZlcnZpZXdBbmltYXRpb25PcHRzW3RoaXMuc2l6aW5nLm9mZnNldENvbXBvbmVudCgpXSA9IC1vdmVydmlld1Bvc2l0aW9uICsgXCJweFwiO1xuICAgICAgICB0aGlzLnNjcm9sbGFibGUuJG92ZXJ2aWV3LmFuaW1hdGUob3ZlcnZpZXdBbmltYXRpb25PcHRzLCB0aGlzLnNjcm9sbGFibGUub3B0aW9ucy5hbmltYXRpb25TcGVlZCk7XG4gICAgICB9LFxuXG4gICAgICBjYWxjdWxhdGVNYXhUaHVtYlBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCB0aGlzLnNpemluZy5zaXplKHRoaXMuJHNjcm9sbEJhcikgLSB0aGlzLnRodW1iU2l6ZSk7XG4gICAgICB9LFxuXG4gICAgICBjYWxjdWxhdGVNYXhPdmVydmlld1Bvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heCgwLCB0aGlzLnNpemluZy5zaXplKHRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcpIC0gdGhpcy5zaXppbmcuc2l6ZSh0aGlzLnNjcm9sbGFibGUuJHZpZXdQb3J0KSk7XG4gICAgICB9LFxuXG4gICAgICBzZXRTY3JvbGxFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBhdHRyID0gXCJwYWdlXCIgKyB0aGlzLnNpemluZy5zY3JvbGxBeGlzKCk7XG4gICAgICAgIGlmICghdGhpcy5zY3JvbGxFdmVudCB8fCB0aGlzLnNjcm9sbEV2ZW50W2F0dHJdICE9IGV2ZW50W2F0dHJdKVxuICAgICAgICAgIHRoaXMuc2Nyb2xsRXZlbnQgPSB7cGFnZVg6IGV2ZW50LnBhZ2VYLCBwYWdlWTogZXZlbnQucGFnZVl9O1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsVG9FbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgICBpZiAodGhpcy5zaXppbmcuaXNJbnNpZGUoJGVsZW1lbnQsIHRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcpICYmICF0aGlzLnNpemluZy5pc0luc2lkZSgkZWxlbWVudCwgdGhpcy5zY3JvbGxhYmxlLiR2aWV3UG9ydCkpIHtcbiAgICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9ICRlbGVtZW50Lm9mZnNldCgpO1xuICAgICAgICAgIHZhciBvdmVydmlld09mZnNldCA9IHRoaXMuc2Nyb2xsYWJsZS4kb3ZlcnZpZXcub2Zmc2V0KCk7XG4gICAgICAgICAgdmFyIHZpZXdQb3J0T2Zmc2V0ID0gdGhpcy5zY3JvbGxhYmxlLiR2aWV3UG9ydC5vZmZzZXQoKTtcbiAgICAgICAgICB0aGlzLnNjcm9sbE92ZXJ2aWV3VG8oZWxlbWVudE9mZnNldFt0aGlzLnNpemluZy5vZmZzZXRDb21wb25lbnQoKV0gLSBvdmVydmlld09mZnNldFt0aGlzLnNpemluZy5vZmZzZXRDb21wb25lbnQoKV0sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVNb3VzZU1vdmVTY3JvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVNb3VzZVdoZWVsU2Nyb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlVG91Y2hTY3JvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVNb3VzZUNsaWNrU2Nyb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucmVtb3ZlV2luZG93UmVzaXplKCk7XG4gICAgICB9LFxuXG4gICAgICBzdG9wRXZlbnRDb25kaXRpb25hbGx5OiBmdW5jdGlvbiAoZXZlbnQsIGNvbmRpdGlvbikge1xuICAgICAgICBpZiAoY29uZGl0aW9uIHx8IHRoaXMuc2Nyb2xsYWJsZS5vcHRpb25zLnByZXZlbnREZWZhdWx0U2Nyb2xsKSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgdmFyIEhTaXppbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgfVxuXG4gICAgSFNpemluZy5wcm90b3R5cGUgPSB7XG4gICAgICBzaXplOiBmdW5jdGlvbiAoJGVsLCBhcmcpIHtcbiAgICAgICAgaWYgKGFyZylcbiAgICAgICAgICByZXR1cm4gJGVsLndpZHRoKGFyZyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZXR1cm4gJGVsLndpZHRoKCk7XG4gICAgICB9LFxuXG4gICAgICBtaW5TaXplOiBmdW5jdGlvbiAoJGVsKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCgkZWwuY3NzKFwibWluLXdpZHRoXCIpKSB8fCAwO1xuICAgICAgfSxcblxuICAgICAgbWF4U2l6ZTogZnVuY3Rpb24gKCRlbCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoJGVsLmNzcyhcIm1heC13aWR0aFwiKSkgfHwgMDtcbiAgICAgIH0sXG5cbiAgICAgIGZpeGVkVGh1bWJTaXplOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5maXhlZFRodW1iV2lkdGg7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxCYXI6IGZ1bmN0aW9uICgkZWwpIHtcbiAgICAgICAgcmV0dXJuICRlbC5maW5kKFwiLnNjcm9sbC1iYXIuaG9yaXpvbnRhbFwiKTtcbiAgICAgIH0sXG5cbiAgICAgIG1vdXNlRGVsdGE6IGZ1bmN0aW9uIChldmVudDEsIGV2ZW50Mikge1xuICAgICAgICByZXR1cm4gZXZlbnQyLnBhZ2VYIC0gZXZlbnQxLnBhZ2VYO1xuICAgICAgfSxcblxuICAgICAgb2Zmc2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcImxlZnRcIjtcbiAgICAgIH0sXG5cbiAgICAgIHdoZWVsRGVsdGE6IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICByZXR1cm4gZGVsdGFYO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsQXhpczogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gXCJYXCI7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxEaXJlY3Rpb246IGZ1bmN0aW9uIChvbGRQZXJjZW50LCBuZXdQZXJjZW50KSB7XG4gICAgICAgIHJldHVybiBvbGRQZXJjZW50IDwgbmV3UGVyY2VudCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgfSxcblxuICAgICAgc2Nyb2xsaW5nS2V5czoge1xuICAgICAgICAzNzogZnVuY3Rpb24gKHZpZXdQb3J0U2l6ZSkge1xuICAgICAgICAgIHJldHVybiAtMTA7IC8vYXJyb3cgbGVmdFxuICAgICAgICB9LFxuICAgICAgICAzOTogZnVuY3Rpb24gKHZpZXdQb3J0U2l6ZSkge1xuICAgICAgICAgIHJldHVybiAxMDsgLy9hcnJvdyByaWdodFxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBpc0luc2lkZTogZnVuY3Rpb24gKGVsZW1lbnQsIHdyYXBwaW5nRWxlbWVudCkge1xuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgICAgICB2YXIgJHdyYXBwaW5nRWxlbWVudCA9ICQod3JhcHBpbmdFbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnRPZmZzZXQgPSAkZWxlbWVudC5vZmZzZXQoKTtcbiAgICAgICAgdmFyIHdyYXBwaW5nRWxlbWVudE9mZnNldCA9ICR3cmFwcGluZ0VsZW1lbnQub2Zmc2V0KCk7XG4gICAgICAgIHJldHVybiAoZWxlbWVudE9mZnNldC5sZWZ0ID49IHdyYXBwaW5nRWxlbWVudE9mZnNldC5sZWZ0KSAmJlxuICAgICAgICAgIChlbGVtZW50T2Zmc2V0LmxlZnQgKyAkZWxlbWVudC53aWR0aCgpIDw9IHdyYXBwaW5nRWxlbWVudE9mZnNldC5sZWZ0ICsgJHdyYXBwaW5nRWxlbWVudC53aWR0aCgpKTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHZhciBWU2l6aW5nID0gZnVuY3Rpb24gKCkge1xuICAgIH1cblxuICAgIFZTaXppbmcucHJvdG90eXBlID0ge1xuXG4gICAgICBzaXplOiBmdW5jdGlvbiAoJGVsLCBhcmcpIHtcbiAgICAgICAgaWYgKGFyZylcbiAgICAgICAgICByZXR1cm4gJGVsLmhlaWdodChhcmcpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuICRlbC5oZWlnaHQoKTtcbiAgICAgIH0sXG5cbiAgICAgIG1pblNpemU6IGZ1bmN0aW9uICgkZWwpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KCRlbC5jc3MoXCJtaW4taGVpZ2h0XCIpKSB8fCAwO1xuICAgICAgfSxcblxuICAgICAgbWF4U2l6ZTogZnVuY3Rpb24gKCRlbCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoJGVsLmNzcyhcIm1heC1oZWlnaHRcIikpIHx8IDA7XG4gICAgICB9LFxuXG4gICAgICBmaXhlZFRodW1iU2l6ZTogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZml4ZWRUaHVtYkhlaWdodDtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbEJhcjogZnVuY3Rpb24gKCRlbCkge1xuICAgICAgICByZXR1cm4gJGVsLmZpbmQoXCIuc2Nyb2xsLWJhci52ZXJ0aWNhbFwiKTtcbiAgICAgIH0sXG5cbiAgICAgIG1vdXNlRGVsdGE6IGZ1bmN0aW9uIChldmVudDEsIGV2ZW50Mikge1xuICAgICAgICByZXR1cm4gZXZlbnQyLnBhZ2VZIC0gZXZlbnQxLnBhZ2VZO1xuICAgICAgfSxcblxuICAgICAgb2Zmc2V0Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcInRvcFwiO1xuICAgICAgfSxcblxuICAgICAgd2hlZWxEZWx0YTogZnVuY3Rpb24gKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgIHJldHVybiBkZWx0YVk7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxBeGlzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIllcIjtcbiAgICAgIH0sXG5cbiAgICAgIHNjcm9sbERpcmVjdGlvbjogZnVuY3Rpb24gKG9sZFBlcmNlbnQsIG5ld1BlcmNlbnQpIHtcbiAgICAgICAgcmV0dXJuIG9sZFBlcmNlbnQgPCBuZXdQZXJjZW50ID8gXCJkb3duXCIgOiBcInVwXCI7XG4gICAgICB9LFxuXG4gICAgICBzY3JvbGxpbmdLZXlzOiB7XG4gICAgICAgIDM4OiBmdW5jdGlvbiAodmlld1BvcnRTaXplKSB7XG4gICAgICAgICAgcmV0dXJuIC0xMDsgLy9hcnJvdyB1cFxuICAgICAgICB9LFxuICAgICAgICA0MDogZnVuY3Rpb24gKHZpZXdQb3J0U2l6ZSkge1xuICAgICAgICAgIHJldHVybiAxMDsgLy9hcnJvdyBkb3duXG4gICAgICAgIH0sXG4gICAgICAgIDMzOiBmdW5jdGlvbiAodmlld1BvcnRTaXplKSB7XG4gICAgICAgICAgcmV0dXJuIC0odmlld1BvcnRTaXplIC0gMjApOyAvL3BhZ2UgdXBcbiAgICAgICAgfSxcbiAgICAgICAgMzQ6IGZ1bmN0aW9uICh2aWV3UG9ydFNpemUpIHtcbiAgICAgICAgICByZXR1cm4gdmlld1BvcnRTaXplIC0gMjA7IC8vcGFnZSBkb3duXG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIGlzSW5zaWRlOiBmdW5jdGlvbiAoZWxlbWVudCwgd3JhcHBpbmdFbGVtZW50KSB7XG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICAgIHZhciAkd3JhcHBpbmdFbGVtZW50ID0gJCh3cmFwcGluZ0VsZW1lbnQpO1xuICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9ICRlbGVtZW50Lm9mZnNldCgpO1xuICAgICAgICB2YXIgd3JhcHBpbmdFbGVtZW50T2Zmc2V0ID0gJHdyYXBwaW5nRWxlbWVudC5vZmZzZXQoKTtcbiAgICAgICAgcmV0dXJuIChlbGVtZW50T2Zmc2V0LnRvcCA+PSB3cmFwcGluZ0VsZW1lbnRPZmZzZXQudG9wKSAmJlxuICAgICAgICAgIChlbGVtZW50T2Zmc2V0LnRvcCArICRlbGVtZW50LmhlaWdodCgpIDw9IHdyYXBwaW5nRWxlbWVudE9mZnNldC50b3AgKyAkd3JhcHBpbmdFbGVtZW50LmhlaWdodCgpKTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG9wdGlvbnMgPT0gdW5kZWZpbmVkKVxuICAgICAgICBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgICBpZiAodHlwZW9mKG9wdGlvbnMpID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgdmFyIHNjcm9sbGFibGUgPSAkKHRoaXMpLmRhdGEoXCJzY3JvbGxhYmxlXCIpO1xuICAgICAgICBpZiAoc2Nyb2xsYWJsZSlcbiAgICAgICAgICBzY3JvbGxhYmxlW29wdGlvbnNdKGFyZ3MpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodHlwZW9mKG9wdGlvbnMpID09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgbmV3IFNjcm9sbGFibGUoJCh0aGlzKSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IFwiSW52YWxpZCB0eXBlIG9mIG9wdGlvbnNcIjtcbiAgICB9KTtcblxuICB9XG4gIDtcblxufSlcbiAgKGpRdWVyeSk7XG5cbihmdW5jdGlvbiAoJCkge1xuXG4gIHZhciB0eXBlcyA9IFsnRE9NTW91c2VTY3JvbGwnLCAnbW91c2V3aGVlbCddO1xuXG4gIGlmICgkLmV2ZW50LmZpeEhvb2tzKSB7XG4gICAgZm9yICh2YXIgaSA9IHR5cGVzLmxlbmd0aDsgaTspIHtcbiAgICAgICQuZXZlbnQuZml4SG9va3NbIHR5cGVzWy0taV0gXSA9ICQuZXZlbnQubW91c2VIb29rcztcbiAgICB9XG4gIH1cblxuICAkLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbCA9IHtcbiAgICBzZXR1cDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBmb3IgKHZhciBpID0gdHlwZXMubGVuZ3RoOyBpOykge1xuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0eXBlc1stLWldLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25tb3VzZXdoZWVsID0gaGFuZGxlcjtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdGVhcmRvd246IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IHR5cGVzLmxlbmd0aDsgaTspIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZXNbLS1pXSwgaGFuZGxlciwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9ubW91c2V3aGVlbCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gICQuZm4uZXh0ZW5kKHtcbiAgICBtb3VzZXdoZWVsOiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiBmbiA/IHRoaXMuYmluZChcIm1vdXNld2hlZWxcIiwgZm4pIDogdGhpcy50cmlnZ2VyKFwibW91c2V3aGVlbFwiKTtcbiAgICB9LFxuXG4gICAgdW5tb3VzZXdoZWVsOiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgIHJldHVybiB0aGlzLnVuYmluZChcIm1vdXNld2hlZWxcIiwgZm4pO1xuICAgIH1cbiAgfSk7XG5cblxuICBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XG4gICAgdmFyIG9yZ0V2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50LCBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBkZWx0YSA9IDAsIHJldHVyblZhbHVlID0gdHJ1ZSwgZGVsdGFYID0gMCwgZGVsdGFZID0gMDtcbiAgICBldmVudCA9ICQuZXZlbnQuZml4KG9yZ0V2ZW50KTtcbiAgICBldmVudC50eXBlID0gXCJtb3VzZXdoZWVsXCI7XG5cbiAgICAvLyBPbGQgc2Nob29sIHNjcm9sbHdoZWVsIGRlbHRhXG4gICAgaWYgKG9yZ0V2ZW50LndoZWVsRGVsdGEpIHtcbiAgICAgIGRlbHRhID0gb3JnRXZlbnQud2hlZWxEZWx0YSAvIDEyMDtcbiAgICB9XG4gICAgaWYgKG9yZ0V2ZW50LmRldGFpbCkge1xuICAgICAgZGVsdGEgPSAtb3JnRXZlbnQuZGV0YWlsIC8gMztcbiAgICB9XG5cbiAgICAvLyBOZXcgc2Nob29sIG11bHRpZGltZW5zaW9uYWwgc2Nyb2xsICh0b3VjaHBhZHMpIGRlbHRhc1xuICAgIGRlbHRhWSA9IGRlbHRhO1xuXG4gICAgLy8gR2Vja29cbiAgICBpZiAob3JnRXZlbnQuYXhpcyAhPT0gdW5kZWZpbmVkICYmIG9yZ0V2ZW50LmF4aXMgPT09IG9yZ0V2ZW50LkhPUklaT05UQUxfQVhJUykge1xuICAgICAgZGVsdGFZID0gMDtcbiAgICAgIGRlbHRhWCA9IGRlbHRhO1xuICAgIH1cblxuICAgIC8vIFdlYmtpdFxuICAgIGlmIChvcmdFdmVudC53aGVlbERlbHRhWSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhWSAvIDEyMDtcbiAgICB9XG4gICAgaWYgKG9yZ0V2ZW50LndoZWVsRGVsdGFYICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRlbHRhWCA9IG9yZ0V2ZW50LndoZWVsRGVsdGFYIC8gMTIwO1xuICAgIH1cblxuICAgIC8vIEFkZCBldmVudCBhbmQgZGVsdGEgdG8gdGhlIGZyb250IG9mIHRoZSBhcmd1bWVudHNcbiAgICBhcmdzLnVuc2hpZnQoZXZlbnQsIGRlbHRhLCBkZWx0YVgsIGRlbHRhWSk7XG5cbiAgICByZXR1cm4gKCQuZXZlbnQuZGlzcGF0Y2ggfHwgJC5ldmVudC5oYW5kbGUpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbn0pKGpRdWVyeSk7XG4iXX0=
